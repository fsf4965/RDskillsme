(self.webpackChunkangular_io_example=self.webpackChunkangular_io_example||[]).push([[844],{6844:function(t,e,o){"use strict";o.r(e),o.d(e,{PostModule:function(){return ft}});var n=o(3679),i=o(8583),s=o(4655),r=o(513),c=o(7716),a=o(1841);const m="http://localhost:8080/skillsme/posts";let l=(()=>{class t{constructor(t){this.http=t}getAll(){return this.http.get(m)}create(t){return this.http.post(m,t)}update(t,e){return this.http.put(`${m}/${t}`,e)}delete(t){return this.http.delete(`${m}/${t}`)}deleteAll(){return this.http.delete(m)}get(t){return this.http.get(`${m}/${t}`)}findByName(t){return this.http.get(`${m}?name=${t}`)}}return t.\u0275fac=function(e){return new(e||t)(c.LFG(a.eN))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=o(7138),d=o(2238),p=o(3738);const g="http://localhost:8080/skillsme/post_comments";let h=(()=>{class t{constructor(t){this.http=t}getAll(){return this.http.get(g)}findBypostId(t){return this.http.get(`${g}?postId=${t}`)}create(t){return this.http.post(g,t)}update(t,e){return this.http.put(`${g}/${t}`,e)}delete(t){return this.http.delete(`${g}/${t}`)}deleteAll(){return this.http.delete(g)}get(t){return this.http.get(`${g}/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(c.LFG(a.eN))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function f(t,e){1&t&&(c.TgZ(0,"div"),c._uU(1,"Comment is required"),c.qZA())}function Z(t,e){1&t&&(c.TgZ(0,"div"),c._uU(1,"Comment must be at least 3 characters"),c.qZA())}function b(t,e){if(1&t&&(c.TgZ(0,"div",5),c.YNc(1,f,2,0,"div",6),c.YNc(2,Z,2,0,"div",6),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",t.commentForm.controls.comment.errors.required),c.xp6(1),c.Q6J("ngIf",t.commentForm.controls.comment.errors.minlength)}}const x=function(t){return{"is-invalid":t}};let C=(()=>{class t{constructor(t,e,o){this.formBuilder=t,this.post_CommentService=e,this.accountDataShareService=o,this.commentInfo=[],this.submitted=!1,this.id=0,this.usercomment=new c.vpe}ngOnInit(){this.createForm(),this.retrievePost_Comment()}createForm(){this.commentForm=this.formBuilder.group({comment:["",[n.kI.required,n.kI.minLength(3)]]})}retrievePost_Comment(){this.post_CommentService.findBypostId(this.postid).subscribe(t=>{this.commentInfo=t,this.usercomment.emit(this.commentInfo),console.log(t)},t=>{console.log(t)})}onSubmit(){return this.submitted=!0,!this.commentForm.invalid&&(this.newcommentInfo=Object.assign({commentTxt:this.commentForm.controls.comment.value,replyComment:[],commenterEmail:this.accountDataShareService.viewUserData().email,postId:this.postid}),this.post_CommentService.create(this.newcommentInfo).subscribe(t=>{console.log(t),this.submitted=!0,this.retrievePost_Comment()},t=>{console.log(t)}),!0)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(n.qu),c.Y36(h),c.Y36(u.F))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-commentbox"]],inputs:{postid:"postid"},outputs:{usercomment:"usercomment"},decls:7,vars:5,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["placeholder","Leave a comment","formControlName","comment",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-success"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){1&t&&(c.TgZ(0,"form",0),c.NdJ("ngSubmit",function(){return e.onSubmit()}),c.TgZ(1,"div",1),c._UZ(2,"textarea",2),c.YNc(3,b,3,2,"div",3),c.qZA(),c.TgZ(4,"div",1),c.TgZ(5,"button",4),c._uU(6,"Post Comment"),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.Q6J("formGroup",e.commentForm),c.xp6(2),c.Q6J("ngClass",c.VKq(3,x,e.submitted&&e.commentForm.controls.comment.errors)),c.xp6(1),c.Q6J("ngIf",e.submitted&&e.commentForm.controls.comment.errors))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,i.mk,i.O5],styles:[""]}),t})();function v(t,e){1&t&&(c.TgZ(0,"div"),c._uU(1,"Comment is required"),c.qZA())}function _(t,e){1&t&&(c.TgZ(0,"div"),c._uU(1,"Comment must be at least 6 characters"),c.qZA())}function A(t,e){1&t&&(c.TgZ(0,"div"),c._uU(1,"Comment must be at most 100 characters"),c.qZA())}function P(t,e){if(1&t&&(c.TgZ(0,"div",5),c.YNc(1,v,2,0,"div",6),c.YNc(2,_,2,0,"div",6),c.YNc(3,A,2,0,"div",6),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",t.childForm.controls.comment.errors.required),c.xp6(1),c.Q6J("ngIf",t.childForm.controls.comment.errors.minlength),c.xp6(1),c.Q6J("ngIf",t.childForm.controls.comment.errors.maxlength)}}const T=function(t){return{"is-invalid":t}};let q=(()=>{class t{constructor(t,e){this.formBuilder=t,this.accountDataShareService=e,this.replyComment=[],this.submitted=!1,this.userReplycomment=new c.vpe,this.deletNo=new c.vpe}ngOnInit(){this.createForm(),console.log("Comment no==>",this.commentNo)}createForm(){this.childForm=this.formBuilder.group({comment:["",[n.kI.required,n.kI.minLength(6),n.kI.maxLength(100)]]})}onSubmit(){return this.submitted=!0,!this.childForm.invalid&&(this.replyComment.push({publishDate:new Date,commentTxt:this.childForm.controls.comment.value,commenterEmail:this.accountDataShareService.viewUserData().email}),this.userReplycomment.emit(this.replyComment),this.deletNo.emit(this.commentNo),!0)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(n.qu),c.Y36(u.F))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-childbox"]],inputs:{commentNo:"commentNo"},outputs:{userReplycomment:"userReplycomment",deletNo:"deletNo"},decls:7,vars:5,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["placeholder","Leave a comment","formControlName","comment",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-success"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){1&t&&(c.TgZ(0,"form",0),c.NdJ("ngSubmit",function(){return e.onSubmit()}),c.TgZ(1,"div",1),c._UZ(2,"textarea",2),c.YNc(3,P,4,3,"div",3),c.qZA(),c.TgZ(4,"div",1),c.TgZ(5,"button",4),c._uU(6,"Post Comment"),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.Q6J("formGroup",e.childForm),c.xp6(2),c.Q6J("ngClass",c.VKq(3,T,e.submitted&&e.childForm.controls.comment.errors)),c.xp6(1),c.Q6J("ngIf",e.submitted&&e.childForm.controls.comment.errors))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,i.mk,i.O5],styles:[""]}),t})();function w(t,e){1&t&&(c.TgZ(0,"h6"),c._uU(1,"No Comments found"),c.qZA())}function y(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"button",12),c.NdJ("click",function(){c.CHM(t);const e=c.oxw().$implicit;return c.oxw(3).openDialogDeleteComment(e.id)}),c._UZ(1,"i",13),c.qZA()}}function M(t,e){if(1&t&&(c.TgZ(0,"li"),c.TgZ(1,"div",4),c.TgZ(2,"p",14),c._uU(3),c.qZA(),c.TgZ(4,"div",15),c.TgZ(5,"span"),c._uU(6),c.qZA(),c.TgZ(7,"span"),c._uU(8),c.ALo(9,"date"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){const t=e.$implicit,o=c.oxw(5);c.xp6(3),c.Oqu(o.jsonDecode(t).commentTxt),c.xp6(3),c.hij("Commenter:",o.jsonDecode(t).commenterEmail," | "),c.xp6(2),c.hij("",c.xi3(9,3,o.jsonDecode(t).publishDate,"dd/MM/yyyy")," ")}}function k(t,e){if(1&t&&(c.TgZ(0,"ul"),c.YNc(1,M,10,6,"li",3),c.qZA()),2&t){const t=c.oxw().$implicit;c.xp6(1),c.Q6J("ngForOf",t.replyComment)}}function O(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"li"),c.TgZ(1,"div",4),c.TgZ(2,"p",5),c._uU(3),c.qZA(),c.TgZ(4,"div",6),c.TgZ(5,"span"),c._uU(6),c.qZA(),c.TgZ(7,"span"),c._uU(8),c.ALo(9,"date"),c.qZA(),c._UZ(10,"span",7),c.TgZ(11,"button",8),c.NdJ("click",function(){const e=c.CHM(t),o=e.$implicit,n=e.index;return c.oxw(3).replyPost_Comment(o.id,n)}),c._uU(12," Reply "),c.qZA(),c._UZ(13,"span",7),c.YNc(14,y,2,0,"button",9),c.qZA(),c.TgZ(15,"div",10),c._UZ(16,"div",11),c.YNc(17,k,2,1,"ul",2),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit,o=c.oxw(3);c.xp6(3),c.Oqu(t.commentTxt),c.xp6(3),c.hij("Commenter:",t.commenterEmail," | "),c.xp6(2),c.Oqu(c.xi3(9,5,t.createdAt,"dd/MM/yyyy")),c.xp6(6),c.Q6J("ngIf",o.isowner(t)),c.xp6(3),c.Q6J("ngIf",t.replyComment.length>0)}}function N(t,e){if(1&t&&(c.TgZ(0,"ul"),c.YNc(1,O,18,8,"li",3),c.qZA()),2&t){const t=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",t.postComment)}}function J(t,e){if(1&t&&(c.TgZ(0,"div",1),c.YNc(1,w,2,0,"h6",2),c.YNc(2,N,2,1,"ul",2),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",t.postComment.length<1),c.xp6(1),c.Q6J("ngIf",t.postComment.length>0)}}let U=(()=>{class t{constructor(t){this.viewContainerRef=t}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(c.s_b))},t.\u0275dir=c.lG2({type:t,selectors:[["","datacontainer",""]]}),t})(),S=(()=>{class t{constructor(t,e,o,n){this.resolver=t,this.post_CommentService=e,this.dialog=o,this.accountDataShareService=n,this.postComment=[],this.countComments=new c.vpe,this.loadComponent=!1,this.commentIndex=0,this.reply=[]}ngOnInit(){}ngOnChanges(){void 0!==this.postComment&&console.log("Main array====>",this.postComment)}isowner(t){return t.commenterEmail==this.accountDataShareService.viewUserData().email}retrievePost_Comment(){this.post_CommentService.findBypostId(this.postid).subscribe(t=>{this.postComment=t,this.countComments.emit(this.postComment),console.log(t)},t=>{console.log(t)})}openDialogDeleteComment(t){this.dialog.open(r.F,{width:"250px"}).afterClosed().subscribe(e=>{console.log("The dialog was closed"),console.log("data returned from mat-dialog-close is ",e),e&&this.removePost_Comment(t)})}removePost_Comment(t){this.post_CommentService.delete(t).subscribe(t=>{console.log(t),alert("remove successfully"),this.retrievePost_Comment()},t=>{console.log(t)})}replyPost_Comment(t,e){this.loadComponent=!0;const o=this.resolver.resolveComponentFactory(q);if(this.entry.toArray()[e].viewContainerRef.length<=0){const n=this.entry.toArray()[e].viewContainerRef.createComponent(o);n.instance.commentNo=e,n.changeDetectorRef.detectChanges(),n.instance.userReplycomment.subscribe(e=>{console.log("Piyali=>",e),this.receiveReplyComment(e,t)}),n.instance.deletNo.subscribe(t=>{n.destroy()})}}receiveReplyComment(t,e){this.reply=t,console.log(t),this.postComment.forEach(o=>{o.id===e&&(o.replyComment.push(...t),console.log("Main array after reply comment=>",o),this.post_CommentService.update(e,o).subscribe(t=>{console.log(t),alert("Post Successfully!"),this.retrievePost_Comment()},t=>{console.log(t)}))}),this.loadComponent=!1}jsonDecode(t){return JSON.parse(t)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(c._Vd),c.Y36(h),c.Y36(d.uw),c.Y36(u.F))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-comments"]],viewQuery:function(t,e){if(1&t&&c.Gf(U,5),2&t){let t;c.iGM(t=c.CRH())&&(e.entry=t)}},inputs:{postComment:"postComment",postid:"postid"},outputs:{countComments:"countComments"},features:[c.TTD],decls:1,vars:1,consts:[["class","comments",4,"ngIf"],[1,"comments"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-12","col-sm-12","comment-container"],[2,"font-size","larger","background-color","gainsboro"],[1,"actions"],[1,"divider"],[1,"btn","btn-sm","btn-info",3,"click"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"childCommentBox"],["datacontainer",""],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash"],[2,"background-color","rgb(240, 239, 239)"],[1,"actions",2,"font-size","smaller"]],template:function(t,e){1&t&&c.YNc(0,J,3,2,"div",0),2&t&&c.Q6J("ngIf",void 0!==e.postComment)},directives:[i.O5,i.sg,U],pipes:[i.uU],styles:[""]}),t})(),I=(()=>{class t{constructor(){}ngOnInit(){this.count=0}receiveComment(t){this.comments=t,this.count=this.comments.length,console.log(this.comments.length)}recieveCount(t){this.comments=t,this.count=this.comments.length}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-post-comment"]],inputs:{postid:"postid"},decls:11,vars:4,consts:[[1,"container"],[1,"card"],[1,"commentbox"],[1,"col-12","col-sm-12","header"],[1,"col-12","col-sm-12","body"],[1,"comment-container"],[1,"comment-form"],[3,"postid","usercomment"],[3,"postComment","postid","countComments"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"h4"),c._uU(5),c.qZA(),c.qZA(),c.TgZ(6,"div",4),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"app-commentbox",7),c.NdJ("usercomment",function(t){return e.receiveComment(t)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"app-comments",8),c.NdJ("countComments",function(t){return e.recieveCount(t)}),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(5),c.hij("Comments (",e.count,")"),c.xp6(4),c.Q6J("postid",e.postid),c.xp6(1),c.Q6J("postComment",e.comments)("postid",e.postid))},directives:[C,S],styles:[".container[_ngcontent-%COMP%]{background-color:transparent;box-shadow:inset 0 0 2000px rgba(163,226,241,.5),;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);font-family:Roboto,sans-serif;border-radius:15px}.card[_ngcontent-%COMP%]{padding:25px;margin-top:20px}.header[_ngcontent-%COMP%]{border-bottom:1px solid #eee;margin-bottom:20px}app-comments[_ngcontent-%COMP%], comment-box[_ngcontent-%COMP%]{background-color:transparent}.comment-container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:50px;height:50px;position:relative}.comment-container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:60px}.comment-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:6px 10px}textarea.form-control[_ngcontent-%COMP%]{resize:none}.comments[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.comments[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:1px solid #eee;margin-bottom:10px}.comments[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.comments[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-left:15px}.divider[_ngcontent-%COMP%]{margin:0 5px;width:1px;height:20px;background:#ccc;display:inline-block;vertical-align:middle}.actions[_ngcontent-%COMP%]{margin-bottom:10px}.actions[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:12px}.collapsible[_ngcontent-%COMP%]{display:inline-block}.childCommentBox[_ngcontent-%COMP%]{margin-left:15px}"]}),t})();function Y(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"mat-card",7),c.TgZ(1,"mat-card-title-group"),c.TgZ(2,"mat-card-title"),c.TgZ(3,"h3"),c._uU(4),c.qZA(),c.qZA(),c.TgZ(5,"mat-card-subtitle"),c._uU(6),c.ALo(7,"date"),c.qZA(),c.qZA(),c.TgZ(8,"mat-card-content"),c.TgZ(9,"p"),c._uU(10),c.qZA(),c.TgZ(11,"p"),c._uU(12),c.qZA(),c.qZA(),c.TgZ(13,"button",6),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).addlike()}),c.TgZ(14,"i",8),c._uU(15),c.qZA(),c.qZA(),c.TgZ(16,"button",6),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).adddislike()}),c.TgZ(17,"i",9),c._uU(18),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=c.oxw(2);c.xp6(4),c.hij("Post ",t.currentPost.post_id,""),c.xp6(2),c.hij("Created Date: ",c.xi3(7,6,t.currentPost.createdAt,"dd/MM/yyyy")," "),c.xp6(4),c.hij("Post Title: ",t.currentPost.title,""),c.xp6(2),c.hij("Post Description: ",t.currentPost.description," "),c.xp6(3),c.Oqu(t.currentPost.likes),c.xp6(3),c.Oqu(t.currentPost.dislikes)}}function D(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"mat-card",7),c.TgZ(1,"mat-card-title-group"),c.TgZ(2,"mat-card-title"),c.TgZ(3,"h3"),c._uU(4),c.qZA(),c.qZA(),c.TgZ(5,"mat-card-subtitle"),c._uU(6),c.ALo(7,"date"),c.qZA(),c.qZA(),c.TgZ(8,"mat-card-content"),c.TgZ(9,"form"),c.TgZ(10,"div",10),c.TgZ(11,"label",11),c._uU(12,"Title"),c.qZA(),c.TgZ(13,"input",12),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw(2).currentPost.title=e}),c.qZA(),c.qZA(),c.TgZ(14,"div",13),c.TgZ(15,"div",10),c.TgZ(16,"label",14),c._uU(17,"Description"),c.qZA(),c.TgZ(18,"textarea",15),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw(2).currentPost.description=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"button",6),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).resetForm()}),c._uU(20,"Reset"),c.qZA(),c.TgZ(21,"button",16),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).updatePost()}),c._uU(22,"Update"),c.qZA(),c.TgZ(23,"button",17),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).openDialogDeletePost()}),c._uU(24,"Delete"),c.qZA(),c.qZA()}if(2&t){const t=c.oxw(2);c.xp6(4),c.hij("Post ",t.currentPost.post_id,""),c.xp6(2),c.hij("Created Date: ",c.xi3(7,4,t.currentPost.createdAt,"dd/MM/yyyy")," "),c.xp6(7),c.Q6J("ngModel",t.currentPost.title),c.xp6(5),c.Q6J("ngModel",t.currentPost.description)}}function F(t,e){if(1&t&&(c.TgZ(0,"div"),c._UZ(1,"app-post-comment",18),c.qZA()),2&t){const t=c.oxw(2);c.xp6(1),c.Q6J("postid",t.postid)}}function Q(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",2),c.YNc(1,Y,19,9,"mat-card",3),c.YNc(2,D,25,7,"mat-card",3),c.TgZ(3,"div",4),c.TgZ(4,"button",5),c.NdJ("click",function(){c.CHM(t);const e=c.oxw();return e.viewComments(e.currentPost.post_id)}),c._uU(5,"Show Comments"),c.qZA(),c.TgZ(6,"button",6),c.NdJ("click",function(){return c.CHM(t),c.oxw().gotoPostsList()}),c._uU(7,"Back to Post Plaza"),c.qZA(),c.qZA(),c.YNc(8,F,2,1,"div",1),c.TgZ(9,"p"),c._uU(10),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",!t.isowner),c.xp6(1),c.Q6J("ngIf",t.isowner),c.xp6(6),c.Q6J("ngIf",t.viewcomment),c.xp6(2),c.Oqu(t.message)}}function j(t,e){1&t&&(c.TgZ(0,"div"),c._UZ(1,"br"),c.TgZ(2,"p"),c._uU(3,"Cannot access this Post..."),c.qZA(),c.qZA())}let z=(()=>{class t{constructor(t,e,o,n,i){this.postService=t,this.accountDataShareService=e,this.route=o,this.router=n,this.dialog=i,this.viewcomment=!1,this.currentPost={post_id:"",title:"",description:"",accountId:"",createdAt:""},this.message="",this.isowner=!1}ngOnInit(){this.message="",this.getAccountType(),this.getPost(this.route.snapshot.params.id)}isOwner(){this.accountDataShareService.viewUserData().id==this.currentPost.accountId&&(this.isowner=!0)}getAccountType(){return this.accountDataShareService.viewUserData().adminAccount}getPost(t){this.postService.get(t).subscribe(t=>{this.currentPost=t,this.isOwner(),console.log(t)},t=>{console.log(t)})}updatePost(){this.message="",this.postService.update(this.currentPost.post_id,this.currentPost).subscribe(t=>{console.log(t)},t=>{console.log(t)})}openDialogDeletePost(){this.dialog.open(r.F,{width:"250px"}).afterClosed().subscribe(t=>{console.log("The dialog was closed"),console.log("data returned from mat-dialog-close is ",t),t&&this.deletePost()})}deletePost(){this.postService.delete(this.currentPost.post_id).subscribe(t=>{console.log(t),this.router.navigate(["../"],{relativeTo:this.route}),alert("Delete Successfully")},t=>{console.log(t)})}gotoPostsList(){this.router.navigate(["../"],{relativeTo:this.route})}resetForm(){this.getPost(this.route.snapshot.params.id)}viewComments(t){this.postid=t,this.viewcomment=!0}addlike(){this.currentPost.likes=this.currentPost.likes+1,this.updatePost()}adddislike(){this.currentPost.dislikes=this.currentPost.dislikes+1,this.updatePost()}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(l),c.Y36(u.F),c.Y36(s.gz),c.Y36(s.F0),c.Y36(d.uw))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-post-detail"]],inputs:{viewcomment:"viewcomment"},decls:4,vars:2,consts:[["class","edit-form",4,"ngIf"],[4,"ngIf"],[1,"edit-form"],["class","example-card",4,"ngIf"],[1,"buttonmash"],["mat-raised-button","","color","primary",3,"click"],[3,"click"],[1,"example-card"],[1,"fa","fa-thumbs-up"],[1,"fa","fa-thumbs-down"],[1,"form-group"],["for","title"],["type","text","id","title","name","title",1,"form-control",3,"ngModel","ngModelChange"],[1,"resize"],["for","description"],["type","text","id","description","name","description",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"update",3,"click"],[1,"delete",3,"click"],[3,"postid"]],template:function(t,e){1&t&&(c.TgZ(0,"body"),c.TgZ(1,"div"),c.YNc(2,Q,11,4,"div",0),c.YNc(3,j,4,0,"div",1),c.qZA(),c.qZA()),2&t&&(c.xp6(2),c.Q6J("ngIf",e.currentPost.post_id),c.xp6(1),c.Q6J("ngIf",!e.currentPost.post_id))},directives:[i.O5,p.a8,p.C1,p.n5,p.$j,p.dn,n._Y,n.JL,n.F,n.Fj,n.JJ,n.On,I],pipes:[i.uU],styles:['@font-face{font-family:bebas;src:url(/assets/fonts/BebasNeue-Regular.ttf) format("truetype")}body[_ngcontent-%COMP%]{top:-15px;background-image:url(/assets/images/post/2825711.gif);background-size:cover;width:100vw;height:100vh;align-content:center}mat-card[_ngcontent-%COMP%]{color:#fff;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);font-family:Roboto,sans-serif;top:10px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:auto;border-radius:15px}mat-card-subtitle[_ngcontent-%COMP%]{color:#f8f8f8}.mat-card[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){background-color:transparent;box-shadow:inset 0 0 2000px rgba(163,226,241,.5),inset 0 0 2000px rgba(92,102,148,.5),inset 0 0 2000px rgba(92,102,148,.5)}.buttonmash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;left:39%;margin-left:30px}.buttonmash[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:11px;text-transform:uppercase;letter-spacing:2.5px;font-weight:500;color:#000;background-color:#cadad8;border:none;border-radius:45px;box-shadow:0 8px 15px rgba(0,0,0,.1);transition:all .3s ease 0s;cursor:pointer;outline:none}h3[_ngcontent-%COMP%]{font-family:bebas;color:#fff;font-size:45px;font-weight:700;align-self:center}.mat-card-subtitle[_ngcontent-%COMP%]{font-size:11px}.mat-card-content[_ngcontent-%COMP%]{font-size:14px}.commentview[_ngcontent-%COMP%]{background-color:transparent}.resize[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:600px;height:100px;overflow:scroll;text-align:start}']}),t})();var H=o(2789),R=o(1494),$=o(873),B=o(8295),L=o(6627),E=o(9983);function G(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"button",23),c.NdJ("click",function(){return c.CHM(t),c.oxw().showPublish(!1)}),c._uU(1,"Hide Publish a New Post"),c.qZA()}}function X(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"button",23),c.NdJ("click",function(){return c.CHM(t),c.oxw().showPublish(!0)}),c._uU(1,"Publish a New Post"),c.qZA()}}function V(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"form"),c.TgZ(2,"div",24),c.TgZ(3,"label",25),c._uU(4,"Title"),c.qZA(),c.TgZ(5,"input",26),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().post.title=e}),c.qZA(),c.qZA(),c.TgZ(6,"div",24),c.TgZ(7,"label",27),c._uU(8,"Description"),c.qZA(),c.TgZ(9,"textarea",28),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().post.description=e}),c.qZA(),c.qZA(),c.TgZ(10,"button",29),c.NdJ("click",function(){return c.CHM(t),c.oxw().savePost()}),c._uU(11,"Submit"),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(5),c.Q6J("ngModel",t.post.title),c.xp6(4),c.Q6J("ngModel",t.post.description)}}function K(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"h4"),c._uU(2,"Post was submitted successfully!"),c.qZA(),c.TgZ(3,"button",29),c.NdJ("click",function(){return c.CHM(t),c.oxw().newPost()}),c._uU(4,"Publish a New Post"),c.qZA(),c.qZA()}}function W(t,e){1&t&&(c.TgZ(0,"mat-header-cell",30),c._uU(1," No. "),c.qZA())}function tt(t,e){if(1&t&&(c.TgZ(0,"mat-cell"),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t.post_id," ")}}function et(t,e){1&t&&(c.TgZ(0,"mat-header-cell",30),c._uU(1," Title "),c.qZA())}const ot=function(t){return[t]};function nt(t,e){if(1&t&&(c.TgZ(0,"mat-cell",31),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.Q6J("routerLink",c.VKq(2,ot,t.post_id)),c.xp6(1),c.hij(" ",t.title," ")}}function it(t,e){1&t&&(c.TgZ(0,"mat-header-cell",30),c._uU(1," Description "),c.qZA())}function st(t,e){if(1&t&&(c.TgZ(0,"mat-cell"),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t.description," ")}}function rt(t,e){1&t&&(c.TgZ(0,"mat-header-cell",30),c._uU(1," Likes "),c.qZA())}function ct(t,e){if(1&t&&(c.TgZ(0,"mat-cell"),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t.likes," ")}}function at(t,e){1&t&&(c.TgZ(0,"mat-header-cell",30),c._uU(1," Disikes "),c.qZA())}function mt(t,e){if(1&t&&(c.TgZ(0,"mat-cell"),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t.dislikes," ")}}function lt(t,e){1&t&&c._UZ(0,"mat-header-row")}function ut(t,e){1&t&&c._UZ(0,"mat-row")}const dt=function(){return[5,10,20]},pt=[{path:"",component:(()=>{class t{constructor(t,e,o){this.router=t,this.accountDataShareService=e,this.postService=o,this.currentPost={},this.currentIndex=-1,this.name="",this.submitted=!1,this.publishPost=!1,this.post={title:"",description:"",createdAt:""},this.displayedColumns=["post_id","title","description","likes","dislikes"],this.dataSource=new H.by(this.posts)}ngOnInit(){this.getAccountType(),this.retrievePosts()}getAccountType(){return this.accountDataShareService.viewUserData().adminAccount}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}retrievePosts(){this.postService.getAll().subscribe(t=>{this.posts=t,this.dataSource=new H.by(this.posts),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,console.log(t)},t=>{console.log(t)})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}refreshList(){this.retrievePosts(),this.currentPost={},this.currentIndex=-1}savePost(){const t={title:this.post.title,description:this.post.description,accountId:this.accountDataShareService.viewUserData().id};this.postService.create(t).subscribe(t=>{console.log(t),this.submitted=!0,this.retrievePosts()},t=>{console.log(t)})}newPost(){this.submitted=!1,this.post={title:"",description:""}}showPublish(t){this.publishPost=t}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(s.F0),c.Y36(u.F),c.Y36(l))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-post-list"]],viewQuery:function(t,e){if(1&t&&(c.Gf($.NW,5),c.Gf(R.YE,5)),2&t){let t;c.iGM(t=c.CRH())&&(e.paginator=t.first),c.iGM(t=c.CRH())&&(e.sort=t.first)}},decls:37,vars:10,consts:[[1,"placetable"],[1,"textbox"],[1,"table-format"],[1,"example-header"],["appearance","standard"],["matInput","","placeholder","Ex. javascript",3,"keyup"],["input",""],[3,"click",4,"ngIf"],[3,"hidden"],[1,"submit-form"],[4,"ngIf"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","post_id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","title"],[3,"routerLink",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","likes"],["matColumnDef","dislikes"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],[3,"click"],[1,"form-group"],["for","title"],["type","text","id","title","ngModel","","required","","name","title",1,"form-control",3,"ngModel","ngModelChange"],["for","description"],["id","description","ngModel","","required","","name","description",1,"form-control",2,"height","200px",3,"ngModel","ngModelChange"],[1,"btn","btn-success",3,"click"],["mat-sort-header",""],[3,"routerLink"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._uU(2,"P O S T H U B"),c.qZA(),c.qZA(),c.TgZ(3,"div",2),c.TgZ(4,"div",3),c.TgZ(5,"mat-form-field",4),c.TgZ(6,"mat-label"),c.TgZ(7,"mat-icon"),c._uU(8,"search"),c.qZA(),c._uU(9," Search... "),c.qZA(),c.TgZ(10,"input",5,6),c.NdJ("keyup",function(t){return e.applyFilter(t)}),c.qZA(),c.qZA(),c.qZA(),c.YNc(12,G,2,0,"button",7),c.YNc(13,X,2,0,"button",7),c.TgZ(14,"div",8),c.TgZ(15,"div",9),c.YNc(16,V,12,2,"div",10),c.YNc(17,K,5,0,"div",10),c.qZA(),c.qZA(),c.TgZ(18,"table",11),c.ynx(19,12),c.YNc(20,W,2,0,"mat-header-cell",13),c.YNc(21,tt,2,1,"mat-cell",14),c.BQk(),c.ynx(22,15),c.YNc(23,et,2,0,"mat-header-cell",13),c.YNc(24,nt,2,4,"mat-cell",16),c.BQk(),c.ynx(25,17),c.YNc(26,it,2,0,"mat-header-cell",13),c.YNc(27,st,2,1,"mat-cell",14),c.BQk(),c.ynx(28,18),c.YNc(29,rt,2,0,"mat-header-cell",13),c.YNc(30,ct,2,1,"mat-cell",14),c.BQk(),c.ynx(31,19),c.YNc(32,at,2,0,"mat-header-cell",13),c.YNc(33,mt,2,1,"mat-cell",14),c.BQk(),c.YNc(34,lt,1,0,"mat-header-row",20),c.YNc(35,ut,1,0,"mat-row",21),c.qZA(),c._UZ(36,"mat-paginator",22),c.qZA()),2&t&&(c.xp6(12),c.Q6J("ngIf",e.publishPost),c.xp6(1),c.Q6J("ngIf",!e.publishPost),c.xp6(1),c.Q6J("hidden",!e.publishPost),c.xp6(2),c.Q6J("ngIf",!e.submitted),c.xp6(1),c.Q6J("ngIf",e.submitted),c.xp6(1),c.Q6J("dataSource",e.dataSource),c.xp6(16),c.Q6J("matHeaderRowDef",e.displayedColumns),c.xp6(1),c.Q6J("matRowDefColumns",e.displayedColumns),c.xp6(1),c.Q6J("pageSizeOptions",c.DdM(9,dt)))},directives:[B.KE,B.hX,L.Hw,E.Nt,i.O5,H.BZ,R.YE,H.w1,H.fO,H.Dz,H.as,H.nj,$.NW,n._Y,n.JL,n.F,n.Fj,n.JJ,n.On,n.Q7,H.ge,R.nU,H.ev,s.rH,H.XQ,H.Gk],styles:['@font-face{font-family:chonburi;src:url(/assets/fonts/Chonburi-Regular.ttf) format("truetype")}@font-face{font-family:bebas;src:url(/assets/fonts/BebasNeue-Regular.ttf) format("truetype")}button[_ngcontent-%COMP%]{font-family:bebas;background-color:#b2a1ee;font-size:1rem;padding:.5rem}.mat-row[_ngcontent-%COMP%]:nth-child(2n)   button[_ngcontent-%COMP%]{background-color:#fff;font-size:1rem;padding:.5rem}.placetable[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-image:url(/assets/images/posthub/new.png);width:100%;height:500px;text-align:center}.textbox[_ngcontent-%COMP%]{box-sizing:border-box;background-color:transparent;width:1400px;height:250px;color:azure;font-family:chonburi;border:4px solid ivory;font-size:150px;text-align:center;-webkit-animation:fadein 2s;animation:fadein 2s}@keyframes fadein{0%{opacity:0}to{opacity:1}}@-webkit-keyframes fadein{0%{opacity:0}to{opacity:1}}table[_ngcontent-%COMP%]{width:100%}.mat-row[_ngcontent-%COMP%]:nth-child(2n){background-color:#b2a1ee}.mat-row[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}']}),t})()},{path:":id",component:z,data:{animation:"post"}}];let gt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[s.Bz.forChild(pt)],s.Bz]}),t})();var ht=o(7539);let ft=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[B.lN,E.c,L.Ps,ht.p9,n.UX,H.p0,R.JX,$.TU,p.QW,i.ez,n.u5,gt],R.JX]}),t})()}}]);